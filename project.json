{
  "$schema": "./node_modules/nx/schemas/project-schema.json",
  "name": "safedep-go",
  "root": ".",
  "sourceRoot": ".",
  "projectType": "application",

  "namedInputs": {
    "default": ["{projectRoot}/**/*.go", "sharedGlobals"]
  },

  "targets": {
    "build": {
      "command": "goreleaser build --clean --snapshot --verbose",
      "inputs": ["default"]
    },
    "build:prod": {
      "command": "goreleaser build --clean --verbose",
      "inputs": ["default"]
    },
    
    "sync-binaries": {
      "command": "go run ./scripts/sync-binaries/main.go -artifacts-path ./dist/artifacts.json -packages-path ./packages -strict=false",
      "dependsOn": ["build"]
    },
    "sync-binaries:prod": {
      "command": "go run ./scripts/sync-binaries/main.go -artifacts-path ./dist/artifacts.json -packages-path ./packages",
      "dependsOn": ["build:prod"]
    }
  }
}
