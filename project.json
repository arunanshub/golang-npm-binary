{
  "$schema": "./node_modules/nx/schemas/project-schema.json",
  "name": "safedep-go",
  "root": ".",
  "sourceRoot": ".",
  "projectType": "application",

  "targets": {
    "build": {
      "command": "goreleaser build --clean --snapshot --verbose",
      "inputs": ["go-files"]
    },
    "build:prod": {
      "command": "goreleaser release --clean --verbose",
      "inputs": ["go-files"]
    },

    "sync-binaries": {
      "command": "go run ./scripts/sync-binaries/main.go -artifacts-path ./dist/artifacts.json -packages-path ./packages -strict=false",
      "dependsOn": ["build"]
    },
    "sync-binaries:prod": {
      "command": "go run ./scripts/sync-binaries/main.go -artifacts-path ./dist/artifacts.json -packages-path ./packages",
      "dependsOn": ["build:prod"]
    }
  }
}
